<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /iservice/

    # Don't rewrite if file or directory exists
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]

    # Protect admin, api, app, config, includes folders - don't redirect them
    RewriteRule ^(admin|api|app|config|includes)(/|$) - [L]

    # Redirect assets and public content to public folder
    RewriteRule ^(css|js|images|fonts)(/|$) public/$0 [L]

    # Redirect all other requests (non-PHP) to public folder
    RewriteCond %{REQUEST_URI} !\.php$
    RewriteRule ^(?!public/)(.*)$ public/$1 [L]
</IfModule>
